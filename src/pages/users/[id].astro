---
import BaseLayout from "../../layouts/BaseLayout.astro"

type User = {
	id: number;
	name: string;
	username: string;
	email: string;
	address: {
		street: string;
		suite: string;
		city: string;
		zipcode: string;
		geo: {
			lat: string;
			lng: string;
		};
	};
	phone: string;
	website: string;
	company: {
		name: string;
		catchPhrase: string;
		bs: string;
	};
};


export async function getStaticPaths() {
		//fetch users
		const users: User[] = await fetch("https://jsonplaceholder.typicode.com/users")
			.then((res) => res.json())
			.then((data) => data);

		const paths = users.map((user) => ({
			params: { id: user.id.toString()}, props: { user } 
		}));

		return paths;
}
const { id } = Astro.params;
const { user } = Astro.props;
---

<BaseLayout title="User Page">
	<a href="/" class="text-blue-500 underline">Back to Users</a>
    <h2>User page {id}</h2>
    <p>Welcome to the user page!</p>    
	<p><strong>Name:</strong> {user.name}</p>
	<p><strong>Email:</strong> {user.email}</p>
	<p><strong>Website:</strong> {user.website}</p>
</BaseLayout>